<!doctype html>
<html>
<head>
<title>Conected-House</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

<script src="/bower_components/webcomponentsjs/webcomponents.js"> </script>
<link rel="import" href="/bower_components/font-roboto/roboto.html">
<link rel="import" href="/bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="/bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/app/portada/post-card.html">

<style>
html,body {
height: 100%;
margin: 0;
background-color: #E5E5E5;
font-family: 'RobotoDraft', sans-serif;
}
core-header-panel {
height: 100%;
overflow: auto;
-webkit-overflow-scrolling: touch;
}
core-toolbar {
background: #03a9f4;
color: white;
}
#tabs {
width: 100%;
margin: 0;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
text-transform: uppercase;
}
.container {
  width: 80%;
  margin: 50px 50px 50px 50px;
}
@media (min-width: 481px) {
  #tabs {
  width: 200px;
  }
  .container {
  width: 400px;
  }
  .test {
  margin: 50px 50px 50px 50px;
  }
}
</style>
</head>

<body>
<core-header-panel>

  <div  ng-app="connectedHouseApp" ng-controller="PortadaCtrl">

  <!--HEADER -->
  <core-toolbar>
      <paper-tabs id="tabs" selected="all" self-end>
          <paper-tab name="Devices" ng-click="toggle = true"> Devices </paper-tab>
          <paper-tab name="Config"  ng-click="toggle = false"> Config </paper-tab>
      </paper-tabs>
  </core-toolbar>

  <!-- DEVICES -->
  <div class="container" ng-show="toggle">
      <post-card class="test" ng-repeat ="device in devices">

        <img width="70" height="70" src="/assets/images/{{device.device_id}}.png">
          <h2 ng-hide="showme">{{device.name}}</h2>
          <h2><div ng-show="showme">
            <label>Custom name: <input type="text" ng-model="name"></label><br>
            <small>IP address: {{device.address}}</small><br>
            <div ng-click="showme=false">
              <button type="submit" class="btn btn-default" ng-click="newname(device._id,name,device.device_id, device.address, device.status)">Save</button>
            </div>
            <button type="submit" class="btn btn-default" ng-click="showme=false">Cancel</button>
            </div>  </h2>
          <a href="" ng-hide="showme" ng-click="showme=true"> edit</a>

          <div ng-repeat="statu_info in status_info | filter:{ 'id':device.status} ">
              <p> Status: {{statu_info.dsc}}</p>
          </div>

          <div ng-repeat="device_info in devices_info | filter:{ 'device_id':device.device_id} ">
              <div ng-repeat="action in device_info.actions">
                <div ng-repeat="action_info in actions_info | filter: {'action_id': action}">
                  <button type="submit" class="btn btn-default" ng-click="newtask(device._id, action_info.action_id)">{{action_info.dsc}}</button>
                </div>
              </div>
          </div>

        </post-card>
      </div>


    <!-- USERS -->
    <div class="container" ng-hide="toggle">
      <post-card class="test" ng-repeat ="user in users">
        <img width="70" height="70" src="/assets/images/avatar.jpg">
        <h2> {{user.local.user}} </h2>
      </post-card>

      <post-card class="test">
        <img width="70" height="70" src="/assets/images/sum.png">
        <h2> New user </h2>

      </post-card>
   </div>








  </div>

<script src="/bower_components/angular/angular.js"></script>
<script src="/assets/angular-mongolab.js"></script>
<script src="/app/portada/portada.controller.js"></script>


</body>
</html>
